{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { authService } from \"@/services/auth.service\";\nimport router from \"@/router\";\naxios.defaults.baseURL = 'http://localhost:8080/backofficeapi/';\naxios.interceptors.request.use(config => {\n  config.headers[\"X-Auth-Token\"] = authService.getAuthToken();\n  return config;\n}, error => {\n  console.log('qwer');\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  const {\n    headers,\n    data\n  } = response;\n  if (headers[\"x-meta-count\"]) {\n    return {\n      data: data.data,\n      count: Number(headers[\"x-meta-count\"])\n    };\n  }\n  if (data.code !== 0) {\n    return Promise.reject(data.message);\n  }\n  return data;\n}, async error => {\n  if (error.response && error.response.status === 401 && error.response.config && !error.response.config.__isRetryRequest) {\n    authService.removeAuthToken();\n    await router.push('/');\n    await Promise.reject(error.message);\n    // throw new Error(error);\n  }\n  await axios.post('logout');\n  return Promise.reject(error.message);\n});","map":{"version":3,"names":["axios","authService","router","defaults","baseURL","interceptors","request","use","config","headers","getAuthToken","error","console","log","Promise","reject","response","data","count","Number","code","message","status","__isRetryRequest","removeAuthToken","push","post"],"sources":["/Users/vitalij/PhpstormProjects/studyFront/src/axios.js"],"sourcesContent":["import axios from \"axios\";\nimport {authService} from \"@/services/auth.service\";\nimport router from \"@/router\";\n\naxios.defaults.baseURL = 'http://localhost:8080/backofficeapi/';\naxios.interceptors.request.use(\n    (config) => {\n        config.headers[\"X-Auth-Token\"] = authService.getAuthToken();\n\n        return config;\n    },\n    (error) => {\n        console.log('qwer');\n        return Promise.reject(error);\n    }\n);\naxios.interceptors.response.use(\n    (response) => {\n        const { headers, data } = response;\n\n        if (headers[\"x-meta-count\"]) {\n            return {\n                data: data.data,\n                count: Number(headers[\"x-meta-count\"]),\n            };\n        }\n\n        if (data.code !== 0) {\n            return Promise.reject(data.message);\n        }\n\n        return data;\n    },\n    async (error) => {\n        if (\n            error.response &&\n            error.response.status === 401 &&\n            error.response.config &&\n            !error.response.config.__isRetryRequest\n        ) {\n            authService.removeAuthToken();\n            await router.push('/');\n\n            await Promise.reject(error.message)\n            // throw new Error(error);\n        }\n\n        await axios.post('logout');\n\n        return Promise.reject(error.message);\n    }\n);"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,WAAW,QAAO,yBAAyB;AACnD,OAAOC,MAAM,MAAM,UAAU;AAE7BF,KAAK,CAACG,QAAQ,CAACC,OAAO,GAAG,sCAAsC;AAC/DJ,KAAK,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACRA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,GAAGR,WAAW,CAACS,YAAY,CAAC,CAAC;EAE3D,OAAOF,MAAM;AACjB,CAAC,EACAG,KAAK,IAAK;EACPC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACnB,OAAOC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAChC,CACJ,CAAC;AACDX,KAAK,CAACK,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC1BS,QAAQ,IAAK;EACV,MAAM;IAAEP,OAAO;IAAEQ;EAAK,CAAC,GAAGD,QAAQ;EAElC,IAAIP,OAAO,CAAC,cAAc,CAAC,EAAE;IACzB,OAAO;MACHQ,IAAI,EAAEA,IAAI,CAACA,IAAI;MACfC,KAAK,EAAEC,MAAM,CAACV,OAAO,CAAC,cAAc,CAAC;IACzC,CAAC;EACL;EAEA,IAAIQ,IAAI,CAACG,IAAI,KAAK,CAAC,EAAE;IACjB,OAAON,OAAO,CAACC,MAAM,CAACE,IAAI,CAACI,OAAO,CAAC;EACvC;EAEA,OAAOJ,IAAI;AACf,CAAC,EACD,MAAON,KAAK,IAAK;EACb,IACIA,KAAK,CAACK,QAAQ,IACdL,KAAK,CAACK,QAAQ,CAACM,MAAM,KAAK,GAAG,IAC7BX,KAAK,CAACK,QAAQ,CAACR,MAAM,IACrB,CAACG,KAAK,CAACK,QAAQ,CAACR,MAAM,CAACe,gBAAgB,EACzC;IACEtB,WAAW,CAACuB,eAAe,CAAC,CAAC;IAC7B,MAAMtB,MAAM,CAACuB,IAAI,CAAC,GAAG,CAAC;IAEtB,MAAMX,OAAO,CAACC,MAAM,CAACJ,KAAK,CAACU,OAAO,CAAC;IACnC;EACJ;EAEA,MAAMrB,KAAK,CAAC0B,IAAI,CAAC,QAAQ,CAAC;EAE1B,OAAOZ,OAAO,CAACC,MAAM,CAACJ,KAAK,CAACU,OAAO,CAAC;AACxC,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}