{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  name: 'PricesItem',\n  data() {\n    return {\n      prices: [],\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  methods: {\n    async loadPrices() {\n      this.loading = true;\n      this.error = null;\n      try {\n        // Сначала пробуем основной backend, потом мок\n        let data;\n        try {\n          console.log('Пытаемся подключиться к основному backend...');\n          // Для основного backend axios interceptor обрабатывает ответ\n          data = await axios.get('shopA/product');\n          console.log('Backend ответил (после interceptor):', data);\n          // Interceptor уже проверил code и вернул data.data\n          this.prices = data.data || [];\n        } catch (backendError) {\n          console.log('Backend недоступен, используем мок:', backendError);\n          // Для мока используем axios без interceptor\n          const mockResponse = await axios.get('https://2b635504-dc32-46bf-863b-aa5f05e78e4b.mock.pstmn.io/backofficeapi/shopA/product');\n          console.log('Мок API ответил:', mockResponse.data);\n          if (mockResponse.data && mockResponse.data.code === 0) {\n            console.log('Данные от мока загружены успешно:', mockResponse.data.data);\n            this.prices = mockResponse.data.data || [];\n          } else {\n            console.log('Ошибка в ответе мок API:', mockResponse.data);\n            this.error = mockResponse.data?.message || 'Mock API returned error code: ' + mockResponse.data?.code;\n          }\n        }\n      } catch (error) {\n        console.error('Error loading prices:', error);\n        this.error = error.message || 'Failed to load prices';\n      } finally {\n        this.loading = false;\n      }\n    },\n    formatPrice(price) {\n      if (price === null || price === undefined) {\n        return '-';\n      }\n      return `$${price}`;\n    }\n  },\n  async mounted() {\n    if (this.user) {\n      await this.loadPrices();\n    }\n  },\n  watch: {\n    user(newUser) {\n      if (newUser) {\n        this.loadPrices();\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","axios","name","data","prices","loading","error","computed","methods","loadPrices","console","log","get","backendError","mockResponse","code","message","formatPrice","price","undefined","mounted","user","watch","newUser"],"sources":["/Users/vitalij/CursorProject/frontStudy/src/components/Prices.vue"],"sourcesContent":["<template>\n    <div>\n        <h3>Prices</h3>\n        <div v-if=\"user\">\n            <p>Welcome, {{user.name}}!</p>\n\n            <!-- Индикатор загрузки -->\n            <div v-if=\"loading\" class=\"loading\">\n                <p>Loading prices...</p>\n            </div>\n\n            <!-- Сообщение об ошибке -->\n            <div v-if=\"error\" class=\"error\">\n                <p>Error loading prices: {{error}}</p>\n                <button @click=\"loadPrices\" class=\"retry-btn\">Retry</button>\n            </div>\n\n            <!-- Таблица с данными -->\n            <div v-if=\"!loading && !error && prices.length > 0\" class=\"table-container\">\n                <table class=\"prices-table\">\n                    <thead>\n                        <tr>\n                            <th>Product</th>\n                            <th>Description</th>\n                            <th>Base Price 1</th>\n                            <th>Base Price 2</th>\n                            <th>Base Price 3</th>\n                            <th>Option Price 1</th>\n                            <th>Option Price 2</th>\n                            <th>Option Price 3</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"item in prices\" :key=\"item.product\">\n                            <td class=\"product-name\">{{item.product}}</td>\n                            <td class=\"description\">{{item.description}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[2])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[2])}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <!-- Сообщение, если нет данных -->\n            <div v-if=\"!loading && !error && prices.length === 0\" class=\"no-data\">\n                <p>No prices available</p>\n            </div>\n        </div>\n        <div v-else>\n            <p>Please log in to view prices.</p>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from \"vuex\";\n    import axios from \"axios\";\n\n    export default {\n        name: 'PricesItem',\n        data() {\n            return {\n                prices: [],\n                loading: false,\n                error: null\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        methods: {\n                                    async loadPrices() {\n                this.loading = true;\n                this.error = null;\n\n                try {\n                    // Сначала пробуем основной backend, потом мок\n                    let data;\n                    try {\n                        console.log('Пытаемся подключиться к основному backend...');\n                        // Для основного backend axios interceptor обрабатывает ответ\n                        data = await axios.get('shopA/product');\n                        console.log('Backend ответил (после interceptor):', data);\n                        // Interceptor уже проверил code и вернул data.data\n                        this.prices = data.data || [];\n                    } catch (backendError) {\n                        console.log('Backend недоступен, используем мок:', backendError);\n                        // Для мока используем axios без interceptor\n                        const mockResponse = await axios.get('https://2b635504-dc32-46bf-863b-aa5f05e78e4b.mock.pstmn.io/backofficeapi/shopA/product');\n                        console.log('Мок API ответил:', mockResponse.data);\n\n                        if (mockResponse.data && mockResponse.data.code === 0) {\n                            console.log('Данные от мока загружены успешно:', mockResponse.data.data);\n                            this.prices = mockResponse.data.data || [];\n                        } else {\n                            console.log('Ошибка в ответе мок API:', mockResponse.data);\n                            this.error = mockResponse.data?.message || 'Mock API returned error code: ' + mockResponse.data?.code;\n                        }\n                    }\n                } catch (error) {\n                    console.error('Error loading prices:', error);\n                    this.error = error.message || 'Failed to load prices';\n                } finally {\n                    this.loading = false;\n                }\n            },\n            formatPrice(price) {\n                if (price === null || price === undefined) {\n                    return '-';\n                }\n                return `$${price}`;\n            }\n        },\n        async mounted() {\n            if (this.user) {\n                await this.loadPrices();\n            }\n        },\n        watch: {\n            user(newUser) {\n                if (newUser) {\n                    this.loadPrices();\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .loading {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n    }\n\n    .error {\n        background-color: #ffe6e6;\n        border: 1px solid #ffcccc;\n        color: #cc0000;\n        padding: 15px;\n        border-radius: 5px;\n        margin: 20px 0;\n        text-align: center;\n    }\n\n    .retry-btn {\n        background-color: #167bff;\n        color: white;\n        border: none;\n        padding: 8px 16px;\n        border-radius: 4px;\n        cursor: pointer;\n        margin-top: 10px;\n    }\n\n    .retry-btn:hover {\n        background-color: #0056b3;\n    }\n\n    .no-data {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n        font-style: italic;\n    }\n\n    .table-container {\n        margin-top: 20px;\n        overflow-x: auto;\n    }\n\n    .prices-table {\n        width: 100%;\n        border-collapse: collapse;\n        background-color: white;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        border-radius: 8px;\n        overflow: hidden;\n    }\n\n    .prices-table th {\n        background-color: #167bff;\n        color: white;\n        padding: 12px 8px;\n        text-align: left;\n        font-weight: 600;\n        font-size: 14px;\n    }\n\n    .prices-table td {\n        padding: 12px 8px;\n        border-bottom: 1px solid #eee;\n        font-size: 14px;\n    }\n\n    .prices-table tr:hover {\n        background-color: #f8f9fa;\n    }\n\n    .product-name {\n        font-weight: 600;\n        color: #333;\n    }\n\n    .description {\n        color: #666;\n        max-width: 200px;\n    }\n\n    .price {\n        font-weight: 500;\n        text-align: right;\n        color: #167bff;\n    }\n\n    .price:contains('-') {\n        color: #999;\n    }\n\n    /* Адаптивность для мобильных устройств */\n    @media (max-width: 768px) {\n        .prices-table {\n            font-size: 12px;\n        }\n\n        .prices-table th,\n        .prices-table td {\n            padding: 8px 4px;\n        }\n\n        .description {\n            max-width: 150px;\n        }\n    }\n</style>"],"mappings":"AA2DI,SAAQA,UAAU,QAAO,MAAM;AAC/B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACX;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGP,UAAU,CAAC,CAAC,MAAM,CAAC;EAC1B,CAAC;EACDQ,OAAO,EAAE;IACmB,MAAMC,UAAUA,CAAA,EAAG;MACvC,IAAI,CAACJ,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACA;QACA,IAAIH,IAAI;QACR,IAAI;UACAO,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;UAC3D;UACAR,IAAG,GAAI,MAAMF,KAAK,CAACW,GAAG,CAAC,eAAe,CAAC;UACvCF,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAER,IAAI,CAAC;UACzD;UACA,IAAI,CAACC,MAAK,GAAID,IAAI,CAACA,IAAG,IAAK,EAAE;QACjC,EAAE,OAAOU,YAAY,EAAE;UACnBH,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEE,YAAY,CAAC;UAChE;UACA,MAAMC,YAAW,GAAI,MAAMb,KAAK,CAACW,GAAG,CAAC,wFAAwF,CAAC;UAC9HF,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEG,YAAY,CAACX,IAAI,CAAC;UAElD,IAAIW,YAAY,CAACX,IAAG,IAAKW,YAAY,CAACX,IAAI,CAACY,IAAG,KAAM,CAAC,EAAE;YACnDL,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEG,YAAY,CAACX,IAAI,CAACA,IAAI,CAAC;YACxE,IAAI,CAACC,MAAK,GAAIU,YAAY,CAACX,IAAI,CAACA,IAAG,IAAK,EAAE;UAC9C,OAAO;YACHO,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEG,YAAY,CAACX,IAAI,CAAC;YAC1D,IAAI,CAACG,KAAI,GAAIQ,YAAY,CAACX,IAAI,EAAEa,OAAM,IAAK,gCAA+B,GAAIF,YAAY,CAACX,IAAI,EAAEY,IAAI;UACzG;QACJ;MACJ,EAAE,OAAOT,KAAK,EAAE;QACZI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACU,OAAM,IAAK,uBAAuB;MACzD,UAAU;QACN,IAAI,CAACX,OAAM,GAAI,KAAK;MACxB;IACJ,CAAC;IACDY,WAAWA,CAACC,KAAK,EAAE;MACf,IAAIA,KAAI,KAAM,IAAG,IAAKA,KAAI,KAAMC,SAAS,EAAE;QACvC,OAAO,GAAG;MACd;MACA,OAAQ,IAAGD,KAAM,EAAC;IACtB;EACJ,CAAC;EACD,MAAME,OAAOA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACC,IAAI,EAAE;MACX,MAAM,IAAI,CAACZ,UAAU,CAAC,CAAC;IAC3B;EACJ,CAAC;EACDa,KAAK,EAAE;IACHD,IAAIA,CAACE,OAAO,EAAE;MACV,IAAIA,OAAO,EAAE;QACT,IAAI,CAACd,UAAU,CAAC,CAAC;MACrB;IACJ;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}