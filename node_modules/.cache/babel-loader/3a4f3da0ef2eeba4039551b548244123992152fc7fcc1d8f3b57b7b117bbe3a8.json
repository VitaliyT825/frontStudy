{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  name: 'PricesItem',\n  data() {\n    return {\n      prices: [],\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  methods: {\n    async loadPrices() {\n      this.loading = true;\n      this.error = null;\n      try {\n        // Сначала пробуем основной backend, потом мок\n        let response;\n        try {\n          response = await axios.get('http://localhost:8080/backofficeapi/shopA/product');\n        } catch (backendError) {\n          console.log('Backend недоступен, используем мок:', backendError.message);\n          response = await axios.get('https://2b635504-dc32-46bf-863b-aa5f05e78e4b.mock.pstmn.io/backofficeapi/shopA/product');\n        }\n        if (response.data.code === 0) {\n          this.prices = response.data.data;\n        } else {\n          this.error = response.data.message || 'Unknown error';\n        }\n      } catch (error) {\n        console.error('Error loading prices:', error);\n        this.error = error.message || 'Failed to load prices';\n      } finally {\n        this.loading = false;\n      }\n    },\n    formatPrice(price) {\n      if (price === null || price === undefined) {\n        return '-';\n      }\n      return `$${price}`;\n    }\n  },\n  async mounted() {\n    if (this.user) {\n      await this.loadPrices();\n    }\n  },\n  watch: {\n    user(newUser) {\n      if (newUser) {\n        this.loadPrices();\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","axios","name","data","prices","loading","error","computed","methods","loadPrices","response","get","backendError","console","log","message","code","formatPrice","price","undefined","mounted","user","watch","newUser"],"sources":["/Users/vitalij/CursorProject/frontStudy/src/components/Prices.vue"],"sourcesContent":["<template>\n    <div>\n        <h3>Prices</h3>\n        <div v-if=\"user\">\n            <p>Welcome, {{user.name}}!</p>\n\n            <!-- Индикатор загрузки -->\n            <div v-if=\"loading\" class=\"loading\">\n                <p>Loading prices...</p>\n            </div>\n\n            <!-- Сообщение об ошибке -->\n            <div v-if=\"error\" class=\"error\">\n                <p>Error loading prices: {{error}}</p>\n                <button @click=\"loadPrices\" class=\"retry-btn\">Retry</button>\n            </div>\n\n            <!-- Таблица с данными -->\n            <div v-if=\"!loading && !error && prices.length > 0\" class=\"table-container\">\n                <table class=\"prices-table\">\n                    <thead>\n                        <tr>\n                            <th>Product</th>\n                            <th>Description</th>\n                            <th>Base Price 1</th>\n                            <th>Base Price 2</th>\n                            <th>Base Price 3</th>\n                            <th>Option Price 1</th>\n                            <th>Option Price 2</th>\n                            <th>Option Price 3</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"item in prices\" :key=\"item.product\">\n                            <td class=\"product-name\">{{item.product}}</td>\n                            <td class=\"description\">{{item.description}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[2])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[2])}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <!-- Сообщение, если нет данных -->\n            <div v-if=\"!loading && !error && prices.length === 0\" class=\"no-data\">\n                <p>No prices available</p>\n            </div>\n        </div>\n        <div v-else>\n            <p>Please log in to view prices.</p>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from \"vuex\";\n    import axios from \"axios\";\n\n    export default {\n        name: 'PricesItem',\n        data() {\n            return {\n                prices: [],\n                loading: false,\n                error: null\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        methods: {\n            async loadPrices() {\n                this.loading = true;\n                this.error = null;\n\n                try {\n                    // Сначала пробуем основной backend, потом мок\n                    let response;\n                    try {\n                        response = await axios.get('http://localhost:8080/backofficeapi/shopA/product');\n                    } catch (backendError) {\n                        console.log('Backend недоступен, используем мок:', backendError.message);\n                        response = await axios.get('https://2b635504-dc32-46bf-863b-aa5f05e78e4b.mock.pstmn.io/backofficeapi/shopA/product');\n                    }\n\n                    if (response.data.code === 0) {\n                        this.prices = response.data.data;\n                    } else {\n                        this.error = response.data.message || 'Unknown error';\n                    }\n                } catch (error) {\n                    console.error('Error loading prices:', error);\n                    this.error = error.message || 'Failed to load prices';\n                } finally {\n                    this.loading = false;\n                }\n            },\n            formatPrice(price) {\n                if (price === null || price === undefined) {\n                    return '-';\n                }\n                return `$${price}`;\n            }\n        },\n        async mounted() {\n            if (this.user) {\n                await this.loadPrices();\n            }\n        },\n        watch: {\n            user(newUser) {\n                if (newUser) {\n                    this.loadPrices();\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .loading {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n    }\n\n    .error {\n        background-color: #ffe6e6;\n        border: 1px solid #ffcccc;\n        color: #cc0000;\n        padding: 15px;\n        border-radius: 5px;\n        margin: 20px 0;\n        text-align: center;\n    }\n\n    .retry-btn {\n        background-color: #167bff;\n        color: white;\n        border: none;\n        padding: 8px 16px;\n        border-radius: 4px;\n        cursor: pointer;\n        margin-top: 10px;\n    }\n\n    .retry-btn:hover {\n        background-color: #0056b3;\n    }\n\n    .no-data {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n        font-style: italic;\n    }\n\n    .table-container {\n        margin-top: 20px;\n        overflow-x: auto;\n    }\n\n    .prices-table {\n        width: 100%;\n        border-collapse: collapse;\n        background-color: white;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        border-radius: 8px;\n        overflow: hidden;\n    }\n\n    .prices-table th {\n        background-color: #167bff;\n        color: white;\n        padding: 12px 8px;\n        text-align: left;\n        font-weight: 600;\n        font-size: 14px;\n    }\n\n    .prices-table td {\n        padding: 12px 8px;\n        border-bottom: 1px solid #eee;\n        font-size: 14px;\n    }\n\n    .prices-table tr:hover {\n        background-color: #f8f9fa;\n    }\n\n    .product-name {\n        font-weight: 600;\n        color: #333;\n    }\n\n    .description {\n        color: #666;\n        max-width: 200px;\n    }\n\n    .price {\n        font-weight: 500;\n        text-align: right;\n        color: #167bff;\n    }\n\n    .price:contains('-') {\n        color: #999;\n    }\n\n    /* Адаптивность для мобильных устройств */\n    @media (max-width: 768px) {\n        .prices-table {\n            font-size: 12px;\n        }\n\n        .prices-table th,\n        .prices-table td {\n            padding: 8px 4px;\n        }\n\n        .description {\n            max-width: 150px;\n        }\n    }\n</style>"],"mappings":"AA2DI,SAAQA,UAAU,QAAO,MAAM;AAC/B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACX;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGP,UAAU,CAAC,CAAC,MAAM,CAAC;EAC1B,CAAC;EACDQ,OAAO,EAAE;IACL,MAAMC,UAAUA,CAAA,EAAG;MACf,IAAI,CAACJ,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACA;QACA,IAAII,QAAQ;QACZ,IAAI;UACAA,QAAO,GAAI,MAAMT,KAAK,CAACU,GAAG,CAAC,mDAAmD,CAAC;QACnF,EAAE,OAAOC,YAAY,EAAE;UACnBC,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEF,YAAY,CAACG,OAAO,CAAC;UACxEL,QAAO,GAAI,MAAMT,KAAK,CAACU,GAAG,CAAC,wFAAwF,CAAC;QACxH;QAEA,IAAID,QAAQ,CAACP,IAAI,CAACa,IAAG,KAAM,CAAC,EAAE;UAC1B,IAAI,CAACZ,MAAK,GAAIM,QAAQ,CAACP,IAAI,CAACA,IAAI;QACpC,OAAO;UACH,IAAI,CAACG,KAAI,GAAII,QAAQ,CAACP,IAAI,CAACY,OAAM,IAAK,eAAe;QACzD;MACJ,EAAE,OAAOT,KAAK,EAAE;QACZO,OAAO,CAACP,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACS,OAAM,IAAK,uBAAuB;MACzD,UAAU;QACN,IAAI,CAACV,OAAM,GAAI,KAAK;MACxB;IACJ,CAAC;IACDY,WAAWA,CAACC,KAAK,EAAE;MACf,IAAIA,KAAI,KAAM,IAAG,IAAKA,KAAI,KAAMC,SAAS,EAAE;QACvC,OAAO,GAAG;MACd;MACA,OAAQ,IAAGD,KAAM,EAAC;IACtB;EACJ,CAAC;EACD,MAAME,OAAOA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACC,IAAI,EAAE;MACX,MAAM,IAAI,CAACZ,UAAU,CAAC,CAAC;IAC3B;EACJ,CAAC;EACDa,KAAK,EAAE;IACHD,IAAIA,CAACE,OAAO,EAAE;MACV,IAAIA,OAAO,EAAE;QACT,IAAI,CAACd,UAAU,CAAC,CAAC;MACrB;IACJ;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}