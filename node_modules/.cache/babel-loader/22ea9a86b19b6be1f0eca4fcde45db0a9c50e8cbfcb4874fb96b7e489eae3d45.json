{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  name: 'PricesItem',\n  data() {\n    return {\n      prices: [],\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  methods: {\n    async loadPrices() {\n      this.loading = true;\n      this.error = null;\n      try {\n        console.log('Загружаем данные с backend...');\n        // Axios interceptor автоматически обрабатывает ответ\n        const data = await axios.get('shopA/product');\n        console.log('Backend ответил:', data);\n        // Interceptor уже проверил code и вернул data.data\n        this.prices = data.data || [];\n        console.log('Данные загружены успешно:', this.prices);\n      } catch (error) {\n        console.error('Error loading prices:', error);\n        this.error = error || 'Failed to load prices';\n      } finally {\n        this.loading = false;\n      }\n    },\n    formatPrice(price) {\n      if (price === null || price === undefined) {\n        return '-';\n      }\n      return `$${price}`;\n    },\n    formatPriceRub(price) {\n      if (price === null || price === undefined) {\n        return '-';\n      }\n      return `${price} р.`;\n    },\n    handleImageError(event) {\n      console.warn('Failed to load image:', event.target.src);\n      // Заменяем сломанное изображение на placeholder\n      event.target.style.display = 'none';\n      event.target.nextElementSibling.style.display = 'flex';\n    }\n  },\n  async mounted() {\n    if (this.user) {\n      await this.loadPrices();\n    }\n  },\n  watch: {\n    user(newUser) {\n      if (newUser) {\n        this.loadPrices();\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","axios","name","data","prices","loading","error","computed","methods","loadPrices","console","log","get","formatPrice","price","undefined","formatPriceRub","handleImageError","event","warn","target","src","style","display","nextElementSibling","mounted","user","watch","newUser"],"sources":["/Users/vitalij/CursorProject/frontStudy/src/components/Prices.vue"],"sourcesContent":["<template>\n    <div class=\"prices-page\">\n        <div class=\"prices-header\">\n            <h2>Product Prices</h2>\n            <p v-if=\"user\" class=\"welcome-text\">Welcome, {{user.name}}!</p>\n        </div>\n\n        <div v-if=\"user\" class=\"prices-content\">\n            <!-- Индикатор загрузки -->\n            <div v-if=\"loading\" class=\"loading\">\n                <p>Loading prices...</p>\n            </div>\n\n            <!-- Сообщение об ошибке -->\n            <div v-if=\"error\" class=\"error\">\n                <p>Error loading prices: {{error}}</p>\n                <button @click=\"loadPrices\" class=\"retry-btn\">Retry</button>\n            </div>\n\n                        <!-- Карточки товаров -->\n            <div v-if=\"!loading && !error && prices.length > 0\" class=\"cards-container\">\n                <div v-for=\"item in prices\" :key=\"item.product\" class=\"product-card\">\n                    <!-- Название товара -->\n                    <h3 class=\"product-title\">{{item.product}}</h3>\n\n                    <!-- Изображение товара -->\n                    <div class=\"card-image-container\">\n                        <img\n                            v-if=\"item.image && item.image.trim()\"\n                            :src=\"item.image\"\n                            :alt=\"item.product\"\n                            class=\"card-product-image\"\n                            @error=\"handleImageError\"\n                        />\n                        <div v-else class=\"card-no-image\">\n                            <span>No image</span>\n                        </div>\n                    </div>\n\n                    <!-- Новая цена (Base Price) -->\n                    <span class=\"spanoran\">Новая</span>\n                    <div class=\"price-table-container\">\n                        <table class=\"tabprice\">\n                            <thead>\n                                <tr>\n                                    <th>Base Price 1</th>\n                                    <th>Base Price 2</th>\n                                    <th>Base Price 3</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td :class=\"{'green-price': item.basePrice[0]}\">{{formatPriceRub(item.basePrice[0])}}</td>\n                                    <td>{{formatPriceRub(item.basePrice[1])}}</td>\n                                    <td>{{formatPriceRub(item.basePrice[2])}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                    <br>\n\n                    <!-- Старая цена (Option Price) -->\n                    <span class=\"spanred\">Старая</span>\n                    <div class=\"price-table-container\">\n                        <table class=\"tabprice\">\n                            <thead>\n                                <tr>\n                                    <th>Option Price 1</th>\n                                    <th>Option Price 2</th>\n                                    <th>Option Price 3</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td :class=\"{'green-price': item.optionPrice[0]}\">{{formatPriceRub(item.optionPrice[0])}}</td>\n                                    <td>{{formatPriceRub(item.optionPrice[1])}}</td>\n                                    <td>{{formatPriceRub(item.optionPrice[2])}}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                    <!-- Описание -->\n                    <div class=\"product-description\">{{item.description}}</div>\n\n                    <!-- Кнопка заказать -->\n                    <div class=\"btn-container\">\n                        <button class=\"order-button\">Заказать</button>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Сообщение, если нет данных -->\n            <div v-if=\"!loading && !error && prices.length === 0\" class=\"no-data\">\n                <p>No prices available</p>\n            </div>\n        </div>\n\n        <div v-else class=\"login-prompt\">\n            <p>Please log in to view prices.</p>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from \"vuex\";\n    import axios from \"axios\";\n\n    export default {\n        name: 'PricesItem',\n        data() {\n            return {\n                prices: [],\n                loading: false,\n                error: null\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        methods: {\n                                                async loadPrices() {\n                this.loading = true;\n                this.error = null;\n\n                try {\n                    console.log('Загружаем данные с backend...');\n                    // Axios interceptor автоматически обрабатывает ответ\n                    const data = await axios.get('shopA/product');\n                    console.log('Backend ответил:', data);\n                    // Interceptor уже проверил code и вернул data.data\n                    this.prices = data.data || [];\n                    console.log('Данные загружены успешно:', this.prices);\n                } catch (error) {\n                    console.error('Error loading prices:', error);\n                    this.error = error || 'Failed to load prices';\n                } finally {\n                    this.loading = false;\n                }\n            },\n            formatPrice(price) {\n                if (price === null || price === undefined) {\n                    return '-';\n                }\n                return `$${price}`;\n            },\n            formatPriceRub(price) {\n                if (price === null || price === undefined) {\n                    return '-';\n                }\n                return `${price} р.`;\n            },\n            handleImageError(event) {\n                console.warn('Failed to load image:', event.target.src);\n                // Заменяем сломанное изображение на placeholder\n                event.target.style.display = 'none';\n                event.target.nextElementSibling.style.display = 'flex';\n            }\n        },\n        async mounted() {\n            if (this.user) {\n                await this.loadPrices();\n            }\n        },\n        watch: {\n            user(newUser) {\n                if (newUser) {\n                    this.loadPrices();\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .prices-page {\n        min-height: calc(100vh - 80px); /* Вычитаем высоту навигации */\n        padding: 20px;\n    }\n\n    .prices-header {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        margin-bottom: 30px;\n        text-align: center;\n    }\n\n    .prices-header h2 {\n        margin: 0 0 10px 0;\n        color: #333;\n        font-size: 28px;\n    }\n\n    .welcome-text {\n        margin: 0;\n        color: #666;\n        font-size: 16px;\n    }\n\n    .prices-content {\n        background-color: white;\n        padding: 30px;\n        border-radius: 10px;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n    }\n\n    .loading {\n        text-align: center;\n        padding: 40px;\n        color: #666;\n        font-size: 18px;\n    }\n\n    .error {\n        background-color: #ffe6e6;\n        border: 1px solid #ffcccc;\n        color: #cc0000;\n        padding: 20px;\n        border-radius: 8px;\n        margin: 20px 0;\n        text-align: center;\n    }\n\n    .retry-btn {\n        background-color: #167bff;\n        color: white;\n        border: none;\n        padding: 10px 20px;\n        border-radius: 5px;\n        cursor: pointer;\n        margin-top: 15px;\n        font-size: 14px;\n    }\n\n    .retry-btn:hover {\n        background-color: #0056b3;\n    }\n\n    .no-data {\n        text-align: center;\n        padding: 40px;\n        color: #666;\n        font-style: italic;\n        font-size: 18px;\n    }\n\n    .login-prompt {\n        background-color: white;\n        padding: 40px;\n        border-radius: 10px;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        text-align: center;\n        font-size: 18px;\n        color: #666;\n    }\n\n    .table-container {\n        margin-top: 20px;\n        overflow-x: auto;\n        border-radius: 10px;\n        box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    }\n\n    .prices-table {\n        width: 100%;\n        border-collapse: collapse;\n        background-color: white;\n        min-width: 800px; /* Минимальная ширина для горизонтального скролла */\n    }\n\n    .prices-table th {\n        background-color: #167bff;\n        color: white;\n        padding: 15px 12px;\n        text-align: left;\n        font-weight: 600;\n        font-size: 14px;\n        white-space: nowrap;\n    }\n\n    .prices-table td {\n        padding: 15px 12px;\n        border-bottom: 1px solid #eee;\n        font-size: 14px;\n        vertical-align: middle;\n    }\n\n    .prices-table tr:hover {\n        background-color: #f8f9fa;\n    }\n\n    .prices-table tr:last-child td {\n        border-bottom: none;\n    }\n\n    .image-cell {\n        width: 80px;\n        text-align: center;\n    }\n\n    .image-container {\n        position: relative;\n        width: 60px;\n        height: 60px;\n        margin: 0 auto;\n    }\n\n    .product-image {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n        border-radius: 6px;\n        border: 2px solid #e9ecef;\n    }\n\n    .no-image {\n        width: 100%;\n        height: 100%;\n        background-color: #f8f9fa;\n        border: 2px dashed #dee2e6;\n        border-radius: 6px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 10px;\n        color: #6c757d;\n        text-align: center;\n    }\n\n    .product-name {\n        font-weight: 600;\n        color: #333;\n        min-width: 120px;\n    }\n\n    .description {\n        color: #666;\n        max-width: 250px;\n        line-height: 1.4;\n    }\n\n    .price {\n        font-weight: 500;\n        text-align: right;\n        color: #167bff;\n        min-width: 80px;\n        font-family: 'Courier New', monospace;\n    }\n\n    .price:contains('-') {\n        color: #999;\n    }\n\n    /* Адаптивность для планшетов */\n    @media (max-width: 1024px) {\n        .prices-page {\n            padding: 15px;\n        }\n\n        .prices-header {\n            padding: 20px;\n        }\n\n        .prices-content {\n            padding: 20px;\n        }\n    }\n\n    /* Адаптивность для мобильных устройств */\n    @media (max-width: 768px) {\n        .prices-page {\n            padding: 10px;\n        }\n\n        .prices-header {\n            padding: 15px;\n        }\n\n        .prices-header h2 {\n            font-size: 24px;\n        }\n\n        .prices-content {\n            padding: 15px;\n        }\n\n        .prices-table {\n            font-size: 12px;\n            min-width: 600px;\n        }\n\n        .prices-table th,\n        .prices-table td {\n            padding: 10px 6px;\n        }\n\n        .image-container {\n            width: 40px;\n            height: 40px;\n        }\n\n        .description {\n            max-width: 150px;\n            font-size: 11px;\n        }\n\n        .price {\n            font-size: 12px;\n        }\n    }\n</style>"],"mappings":"AA0GI,SAAQA,UAAU,QAAO,MAAM;AAC/B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACX;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGP,UAAU,CAAC,CAAC,MAAM,CAAC;EAC1B,CAAC;EACDQ,OAAO,EAAE;IAC+B,MAAMC,UAAUA,CAAA,EAAG;MACnD,IAAI,CAACJ,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MAEjB,IAAI;QACAI,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC5C;QACA,MAAMR,IAAG,GAAI,MAAMF,KAAK,CAACW,GAAG,CAAC,eAAe,CAAC;QAC7CF,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAER,IAAI,CAAC;QACrC;QACA,IAAI,CAACC,MAAK,GAAID,IAAI,CAACA,IAAG,IAAK,EAAE;QAC7BO,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAACP,MAAM,CAAC;MACzD,EAAE,OAAOE,KAAK,EAAE;QACZI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C,IAAI,CAACA,KAAI,GAAIA,KAAI,IAAK,uBAAuB;MACjD,UAAU;QACN,IAAI,CAACD,OAAM,GAAI,KAAK;MACxB;IACJ,CAAC;IACDQ,WAAWA,CAACC,KAAK,EAAE;MACf,IAAIA,KAAI,KAAM,IAAG,IAAKA,KAAI,KAAMC,SAAS,EAAE;QACvC,OAAO,GAAG;MACd;MACA,OAAQ,IAAGD,KAAM,EAAC;IACtB,CAAC;IACDE,cAAcA,CAACF,KAAK,EAAE;MAClB,IAAIA,KAAI,KAAM,IAAG,IAAKA,KAAI,KAAMC,SAAS,EAAE;QACvC,OAAO,GAAG;MACd;MACA,OAAQ,GAAED,KAAK,KAAK;IACxB,CAAC;IACDG,gBAAgBA,CAACC,KAAK,EAAE;MACpBR,OAAO,CAACS,IAAI,CAAC,uBAAuB,EAAED,KAAK,CAACE,MAAM,CAACC,GAAG,CAAC;MACvD;MACAH,KAAK,CAACE,MAAM,CAACE,KAAK,CAACC,OAAM,GAAI,MAAM;MACnCL,KAAK,CAACE,MAAM,CAACI,kBAAkB,CAACF,KAAK,CAACC,OAAM,GAAI,MAAM;IAC1D;EACJ,CAAC;EACD,MAAME,OAAOA,CAAA,EAAG;IACZ,IAAI,IAAI,CAACC,IAAI,EAAE;MACX,MAAM,IAAI,CAACjB,UAAU,CAAC,CAAC;IAC3B;EACJ,CAAC;EACDkB,KAAK,EAAE;IACHD,IAAIA,CAACE,OAAO,EAAE;MACV,IAAIA,OAAO,EAAE;QACT,IAAI,CAACnB,UAAU,CAAC,CAAC;MACrB;IACJ;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}