{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d4582d0c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Prices\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Loading prices...\", -1 /* HOISTED */));\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = {\n  key: 1,\n  class: \"error\"\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"table-container\"\n};\nconst _hoisted_8 = {\n  class: \"prices-table\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Product\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Description\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Base Price 1\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Base Price 2\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Base Price 3\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Option Price 1\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Option Price 2\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Option Price 3\")])], -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"product-name\"\n};\nconst _hoisted_11 = {\n  class: \"description\"\n};\nconst _hoisted_12 = {\n  class: \"price\"\n};\nconst _hoisted_13 = {\n  class: \"price\"\n};\nconst _hoisted_14 = {\n  class: \"price\"\n};\nconst _hoisted_15 = {\n  class: \"price\"\n};\nconst _hoisted_16 = {\n  class: \"price\"\n};\nconst _hoisted_17 = {\n  class: \"price\"\n};\nconst _hoisted_18 = {\n  key: 3,\n  class: \"no-data\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"No prices available\", -1 /* HOISTED */));\nconst _hoisted_20 = [_hoisted_19];\nconst _hoisted_21 = {\n  key: 1\n};\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Please log in to view prices.\", -1 /* HOISTED */));\nconst _hoisted_23 = [_hoisted_22];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _ctx.user ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, \"Welcome, \" + _toDisplayString(_ctx.user.name) + \"!\", 1 /* TEXT */), _createCommentVNode(\" Индикатор загрузки \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [..._hoisted_5])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Сообщение об ошибке \"), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, \"Error loading prices: \" + _toDisplayString($data.error), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.loadPrices && $options.loadPrices(...args)),\n    class: \"retry-btn\"\n  }, \"Retry\")])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Таблица с данными \"), !$data.loading && !$data.error && $data.prices.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_hoisted_9, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.prices, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.product\n    }, [_createElementVNode(\"td\", _hoisted_10, _toDisplayString(item.product), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(item.description), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString($options.formatPrice(item.basePrice[0])), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString($options.formatPrice(item.basePrice[1])), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, _toDisplayString($options.formatPrice(item.basePrice[2])), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_15, _toDisplayString($options.formatPrice(item.optionPrice[0])), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_16, _toDisplayString($options.formatPrice(item.optionPrice[1])), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_17, _toDisplayString($options.formatPrice(item.optionPrice[2])), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Сообщение, если нет данных \"), !$data.loading && !$data.error && $data.prices.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [..._hoisted_20])) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [..._hoisted_23]))]);\n}","map":{"version":3,"names":["_createElementVNode","key","class","_hoisted_4","_hoisted_19","_hoisted_22","_createElementBlock","_hoisted_1","_ctx","user","_hoisted_2","_toDisplayString","name","_createCommentVNode","$data","loading","_hoisted_3","_hoisted_5","error","_hoisted_6","onClick","_cache","args","$options","loadPrices","prices","length","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","item","product","_hoisted_10","_hoisted_11","description","_hoisted_12","formatPrice","basePrice","_hoisted_13","_hoisted_14","_hoisted_15","optionPrice","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_23"],"sources":["/Users/vitalij/CursorProject/frontStudy/src/components/Prices.vue"],"sourcesContent":["<template>\n    <div>\n        <h3>Prices</h3>\n        <div v-if=\"user\">\n            <p>Welcome, {{user.name}}!</p>\n\n            <!-- Индикатор загрузки -->\n            <div v-if=\"loading\" class=\"loading\">\n                <p>Loading prices...</p>\n            </div>\n\n            <!-- Сообщение об ошибке -->\n            <div v-if=\"error\" class=\"error\">\n                <p>Error loading prices: {{error}}</p>\n                <button @click=\"loadPrices\" class=\"retry-btn\">Retry</button>\n            </div>\n\n            <!-- Таблица с данными -->\n            <div v-if=\"!loading && !error && prices.length > 0\" class=\"table-container\">\n                <table class=\"prices-table\">\n                    <thead>\n                        <tr>\n                            <th>Product</th>\n                            <th>Description</th>\n                            <th>Base Price 1</th>\n                            <th>Base Price 2</th>\n                            <th>Base Price 3</th>\n                            <th>Option Price 1</th>\n                            <th>Option Price 2</th>\n                            <th>Option Price 3</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"item in prices\" :key=\"item.product\">\n                            <td class=\"product-name\">{{item.product}}</td>\n                            <td class=\"description\">{{item.description}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.basePrice[2])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[0])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[1])}}</td>\n                            <td class=\"price\">{{formatPrice(item.optionPrice[2])}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <!-- Сообщение, если нет данных -->\n            <div v-if=\"!loading && !error && prices.length === 0\" class=\"no-data\">\n                <p>No prices available</p>\n            </div>\n        </div>\n        <div v-else>\n            <p>Please log in to view prices.</p>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapGetters} from \"vuex\";\n    import axios from \"axios\";\n\n    export default {\n        name: 'PricesItem',\n        data() {\n            return {\n                prices: [],\n                loading: false,\n                error: null\n            }\n        },\n        computed: {\n            ...mapGetters(['user'])\n        },\n        methods: {\n                        async loadPrices() {\n                this.loading = true;\n                this.error = null;\n\n                try {\n                    // Сначала пробуем основной backend, потом мок\n                    let response;\n                    try {\n                        console.log('Пытаемся подключиться к основному backend...');\n                        response = await axios.get('http://localhost:8080/backofficeapi/shopA/product');\n                        console.log('Backend ответил:', response.data);\n                    } catch (backendError) {\n                        console.log('Backend недоступен, используем мок:', backendError.message);\n                        response = await axios.get('https://2b635504-dc32-46bf-863b-aa5f05e78e4b.mock.pstmn.io/backofficeapi/shopA/product');\n                        console.log('Мок API ответил:', response.data);\n                    }\n\n                    console.log('Проверяем response.data.code:', response.data.code, typeof response.data.code);\n\n                    if (response.data && response.data.code === 0) {\n                        console.log('Данные загружены успешно:', response.data.data);\n                        this.prices = response.data.data || [];\n                    } else {\n                        console.log('Ошибка в ответе API:', response.data);\n                        this.error = response.data?.message || 'API returned error code: ' + response.data?.code;\n                    }\n                } catch (error) {\n                    console.error('Error loading prices:', error);\n                    this.error = error.message || 'Failed to load prices';\n                } finally {\n                    this.loading = false;\n                }\n            },\n            formatPrice(price) {\n                if (price === null || price === undefined) {\n                    return '-';\n                }\n                return `$${price}`;\n            }\n        },\n        async mounted() {\n            if (this.user) {\n                await this.loadPrices();\n            }\n        },\n        watch: {\n            user(newUser) {\n                if (newUser) {\n                    this.loadPrices();\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .loading {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n    }\n\n    .error {\n        background-color: #ffe6e6;\n        border: 1px solid #ffcccc;\n        color: #cc0000;\n        padding: 15px;\n        border-radius: 5px;\n        margin: 20px 0;\n        text-align: center;\n    }\n\n    .retry-btn {\n        background-color: #167bff;\n        color: white;\n        border: none;\n        padding: 8px 16px;\n        border-radius: 4px;\n        cursor: pointer;\n        margin-top: 10px;\n    }\n\n    .retry-btn:hover {\n        background-color: #0056b3;\n    }\n\n    .no-data {\n        text-align: center;\n        padding: 20px;\n        color: #666;\n        font-style: italic;\n    }\n\n    .table-container {\n        margin-top: 20px;\n        overflow-x: auto;\n    }\n\n    .prices-table {\n        width: 100%;\n        border-collapse: collapse;\n        background-color: white;\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        border-radius: 8px;\n        overflow: hidden;\n    }\n\n    .prices-table th {\n        background-color: #167bff;\n        color: white;\n        padding: 12px 8px;\n        text-align: left;\n        font-weight: 600;\n        font-size: 14px;\n    }\n\n    .prices-table td {\n        padding: 12px 8px;\n        border-bottom: 1px solid #eee;\n        font-size: 14px;\n    }\n\n    .prices-table tr:hover {\n        background-color: #f8f9fa;\n    }\n\n    .product-name {\n        font-weight: 600;\n        color: #333;\n    }\n\n    .description {\n        color: #666;\n        max-width: 200px;\n    }\n\n    .price {\n        font-weight: 500;\n        text-align: right;\n        color: #167bff;\n    }\n\n    .price:contains('-') {\n        color: #999;\n    }\n\n    /* Адаптивность для мобильных устройств */\n    @media (max-width: 768px) {\n        .prices-table {\n            font-size: 12px;\n        }\n\n        .prices-table th,\n        .prices-table td {\n            padding: 8px 4px;\n        }\n\n        .description {\n            max-width: 150px;\n        }\n    }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}